# AppMetrica Installs Antifraud
 Антифрод для новых установок на базе AppMetrica

> **Решаемая проблема**<br>
> После запуска рекламных in-app кампаний количество установок выросло кратно без соответствующего роста заказов в CRM. Дополнительные установки также полились в органику. Некоторые in-app трекеры генерировали несуществующие действия в AppMetrica, например, событие покупки, айди которых не было в CRM. Порой воронка по in-app могла достигать 100% конверсии по 5 шагам, что естественно невозможно для тысяч установок.
>
> <b>Необходимо было определить корректных пользователей до user_id. </b>
 
 Запрос возвращает id настоящих пользователей

## Описание используемых таблиц и полей
|Таблица|Описание|
| --- | --- |
|appmetrica_installs|Выгрузка Logs API /logs/v1/export/installations|
|appmetrica_profiles|Выгрузка Logs API /logs/v1/export/profiles|
|appmetrica_sessions|Выгрузка Logs API /logs/v1/export/sessions_starts|

<br>

|Кастомное поле в таблице appmetrica_profiles|Описание|
| --- | --- |
|device_id|Уникальный айди устройства, созданный каким угодно образом самостоятельно. Присваивается при первом запуске приложения|
|client_id|Идентификатор авторизованного пользователя из CRM #1. Присваивается при авторизации|
|gold_id|Идентификатор авторизованного пользователя из CRM #2. Присваивается при авторизации|

## Описание логики фильтрации корректных установок
